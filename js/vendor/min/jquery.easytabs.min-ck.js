!function(a){a.easytabs=function(t,s){var e=this,i=a(t),n={animate:!0,panelActiveClass:"active",tabActiveClass:"active",defaultTab:"li:first-child",animationSpeed:"normal",tabs:"> ul > li",updateHash:!0,cycle:!1,collapsible:!1,collapsedClass:"collapsed",collapsedByDefault:!0,uiTabs:!1,transitionIn:"fadeIn",transitionOut:"fadeOut",transitionInEasing:"swing",transitionOutEasing:"swing",transitionCollapse:"slideUp",transitionUncollapse:"slideDown",transitionCollapseEasing:"swing",transitionUncollapseEasing:"swing",containerClass:"",tabsClass:"",tabClass:"",panelClass:"",cache:!0,event:"click",panelContext:i},l,o,c,d,r,h={fast:200,normal:400,slow:600},b;e.init=function(){e.settings=b=a.extend({},n,s),b.bind_str=b.event+".easytabs",b.uiTabs&&(b.tabActiveClass="ui-tabs-selected",b.containerClass="ui-tabs ui-widget ui-widget-content ui-corner-all",b.tabsClass="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all",b.tabClass="ui-state-default ui-corner-top",b.panelClass="ui-tabs-panel ui-widget-content ui-corner-bottom"),b.collapsible&&void 0!==s.defaultTab&&void 0===s.collpasedByDefault&&(b.collapsedByDefault=!1),"string"==typeof b.animationSpeed&&(b.animationSpeed=h[b.animationSpeed]),a("a.anchor").remove().prependTo("body"),i.data("easytabs",{}),e.setTransitions(),e.getTabs(),u(),f(),C(),w(),T(),i.attr("data-easytabs",!0)},e.setTransitions=function(){c=b.animate?{show:b.transitionIn,hide:b.transitionOut,speed:b.animationSpeed,collapse:b.transitionCollapse,uncollapse:b.transitionUncollapse,halfSpeed:b.animationSpeed/2}:{show:"show",hide:"hide",speed:0,collapse:"hide",uncollapse:"show",halfSpeed:0}},e.getTabs=function(){var t;e.tabs=i.find(b.tabs),e.panels=a(),e.tabs.each(function(){var s=a(this),i=s.children("a"),n=s.children("a").data("target");s.data("easytabs",{}),void 0!==n&&null!==n?s.data("easytabs").ajax=i.attr("href"):n=i.attr("href"),n=n.match(/#([^\?]+)/)[1],t=b.panelContext.find("#"+n),t.length?(t.data("easytabs",{position:t.css("position"),visibility:t.css("visibility")}),t.not(b.panelActiveClass).hide(),e.panels=e.panels.add(t),s.data("easytabs").panel=t):(e.tabs=e.tabs.not(s),"console"in window&&console.warn("Warning: tab without matching panel for selector '#"+n+"' removed from set"))})},e.selectTab=function(a,t){var s=window.location,i=s.hash.match(/^[^\?]*/)[0],n=a.parent().data("easytabs").panel,l=a.parent().data("easytabs").ajax;b.collapsible&&!r&&(a.hasClass(b.tabActiveClass)||a.hasClass(b.collapsedClass))?e.toggleTabCollapse(a,n,l,t):a.hasClass(b.tabActiveClass)&&n.hasClass(b.panelActiveClass)?b.cache||v(a,n,l,t):v(a,n,l,t)},e.toggleTabCollapse=function(a,t,s,n){e.panels.stop(!0,!0),p(i,"easytabs:before",[a,t,b])&&(e.tabs.filter("."+b.tabActiveClass).removeClass(b.tabActiveClass).children().removeClass(b.tabActiveClass),a.hasClass(b.collapsedClass)?(!s||b.cache&&a.parent().data("easytabs").cached||(i.trigger("easytabs:ajax:beforeSend",[a,t]),t.load(s,function(s,e,n){a.parent().data("easytabs").cached=!0,i.trigger("easytabs:ajax:complete",[a,t,s,e,n])})),a.parent().removeClass(b.collapsedClass).addClass(b.tabActiveClass).children().removeClass(b.collapsedClass).addClass(b.tabActiveClass),t.addClass(b.panelActiveClass)[c.uncollapse](c.speed,b.transitionUncollapseEasing,function(){i.trigger("easytabs:midTransition",[a,t,b]),"function"==typeof n&&n()})):(a.addClass(b.collapsedClass).parent().addClass(b.collapsedClass),t.removeClass(b.panelActiveClass)[c.collapse](c.speed,b.transitionCollapseEasing,function(){i.trigger("easytabs:midTransition",[a,t,b]),"function"==typeof n&&n()})))},e.matchTab=function(a){return e.tabs.find("[href='"+a+"'],[data-target='"+a+"']").first()},e.matchInPanel=function(a){return a&&e.validId(a)?e.panels.filter(":has("+a+")").first():[]},e.validId=function(a){return a.substr(1).match(/^[A-Za-z]+[A-Za-z0-9\-_:\.].$/)},e.selectTabFromHashChange=function(){var a=window.location.hash.match(/^[^\?]*/)[0],t=e.matchTab(a),s;b.updateHash&&(t.length?(r=!0,e.selectTab(t)):(s=e.matchInPanel(a),s.length?(a="#"+s.attr("id"),t=e.matchTab(a),r=!0,e.selectTab(t)):l.hasClass(b.tabActiveClass)||b.cycle||(""===a||e.matchTab(d).length||i.closest(a).length)&&(r=!0,e.selectTab(o))))},e.cycleTabs=function(t){b.cycle&&(t%=e.tabs.length,$tab=a(e.tabs[t]).children("a").first(),r=!0,e.selectTab($tab,function(){setTimeout(function(){e.cycleTabs(t+1)},b.cycle)}))},e.publicMethods={select:function(t){var s;0===(s=e.tabs.filter(t)).length?0===(s=e.tabs.find("a[href='"+t+"']")).length&&0===(s=e.tabs.find("a"+t)).length&&0===(s=e.tabs.find("[data-target='"+t+"']")).length&&0===(s=e.tabs.find("a[href$='"+t+"']")).length&&a.error("Tab '"+t+"' does not exist in tab set"):s=s.children("a").first(),e.selectTab(s)}};var p=function(t,s,e){var i=a.Event(s);return t.trigger(i,e),i.result!==!1},u=function(){i.addClass(b.containerClass),e.tabs.parent().addClass(b.tabsClass),e.tabs.addClass(b.tabClass),e.panels.addClass(b.panelClass)},f=function(){var t=window.location.hash.match(/^[^\?]*/)[0],s=e.matchTab(t).parent(),i;1===s.length?(l=s,b.cycle=!1):(i=e.matchInPanel(t),i.length?(t="#"+i.attr("id"),l=e.matchTab(t).parent()):(l=e.tabs.parent().find(b.defaultTab),0===l.length&&a.error("The specified default tab ('"+b.defaultTab+"') could not be found in the tab set ('"+b.tabs+"') out of "+e.tabs.length+" tabs."))),o=l.children("a").first(),g(s)},g=function(t){var s,e;b.collapsible&&0===t.length&&b.collapsedByDefault?l.addClass(b.collapsedClass).children().addClass(b.collapsedClass):(s=a(l.data("easytabs").panel),e=l.data("easytabs").ajax,!e||b.cache&&l.data("easytabs").cached||(i.trigger("easytabs:ajax:beforeSend",[o,s]),s.load(e,function(a,t,e){l.data("easytabs").cached=!0,i.trigger("easytabs:ajax:complete",[o,s,a,t,e])})),l.data("easytabs").panel.show().addClass(b.panelActiveClass),l.addClass(b.tabActiveClass).children().addClass(b.tabActiveClass)),i.trigger("easytabs:initialised",[o,s])},C=function(){e.tabs.children("a").bind(b.bind_str,function(t){b.cycle=!1,r=!1,e.selectTab(a(this)),t.preventDefault?t.preventDefault():t.returnValue=!1})},v=function(a,t,s,n){if(e.panels.stop(!0,!0),p(i,"easytabs:before",[a,t,b])){var l=e.panels.filter(":visible"),o=t.parent(),h,u,f,g,C=window.location.hash.match(/^[^\?]*/)[0];b.animate&&(h=y(t),u=l.length?m(l):0,f=h-u),d=C,g=function(){i.trigger("easytabs:midTransition",[a,t,b]),b.animate&&"fadeIn"==b.transitionIn&&0>f&&o.animate({height:o.height()+f},c.halfSpeed).css({"min-height":""}),b.updateHash&&!r?window.location.hash="#"+t.attr("id"):r=!1,t[c.show](c.speed,b.transitionInEasing,function(){o.css({height:"","min-height":""}),i.trigger("easytabs:after",[a,t,b]),"function"==typeof n&&n()})},!s||b.cache&&a.parent().data("easytabs").cached||(i.trigger("easytabs:ajax:beforeSend",[a,t]),t.load(s,function(s,e,n){a.parent().data("easytabs").cached=!0,i.trigger("easytabs:ajax:complete",[a,t,s,e,n])})),b.animate&&"fadeOut"==b.transitionOut&&(f>0?o.animate({height:o.height()+f},c.halfSpeed):o.css({"min-height":o.height()})),e.tabs.filter("."+b.tabActiveClass).removeClass(b.tabActiveClass).children().removeClass(b.tabActiveClass),e.tabs.filter("."+b.collapsedClass).removeClass(b.collapsedClass).children().removeClass(b.collapsedClass),a.parent().addClass(b.tabActiveClass).children().addClass(b.tabActiveClass),e.panels.filter("."+b.panelActiveClass).removeClass(b.panelActiveClass),t.addClass(b.panelActiveClass),l.length?l[c.hide](c.speed,b.transitionOutEasing,g):t[c.uncollapse](c.speed,b.transitionUncollapseEasing,g)}},y=function(t){if(t.data("easytabs")&&t.data("easytabs").lastHeight)return t.data("easytabs").lastHeight;var s=t.css("display"),e,i;try{e=a("<div></div>",{position:"absolute",visibility:"hidden",overflow:"hidden"})}catch(n){e=a("<div></div>",{visibility:"hidden",overflow:"hidden"})}return i=t.wrap(e).css({position:"relative",visibility:"hidden",display:"block"}).outerHeight(),t.unwrap(),t.css({position:t.data("easytabs").position,visibility:t.data("easytabs").visibility,display:s}),t.data("easytabs").lastHeight=i,i},m=function(a){var t=a.outerHeight();return a.data("easytabs")?a.data("easytabs").lastHeight=t:a.data("easytabs",{lastHeight:t}),t},w=function(){"function"==typeof a(window).hashchange?a(window).hashchange(function(){e.selectTabFromHashChange()}):a.address&&"function"==typeof a.address.change&&a.address.change(function(){e.selectTabFromHashChange()})},T=function(){var a;b.cycle&&(a=e.tabs.index(l),setTimeout(function(){e.cycleTabs(a+1)},b.cycle))};e.init()},a.fn.easytabs=function(t){var s=arguments;return this.each(function(){var e=a(this),i=e.data("easytabs");return void 0===i&&(i=new a.easytabs(this,t),e.data("easytabs",i)),i.publicMethods[t]?i.publicMethods[t](Array.prototype.slice.call(s,1)):void 0})}}(jQuery);